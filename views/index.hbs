<html>

<head>
<link href="https://fonts.googleapis.com/css?family=Alegreya+Sans" rel="stylesheet">
</head>
<body style="font-family: 'Alegreya Sans'; background-color: rgb(123,176,219); color:white">
    <div style="display:flex;align-self:center;text-align:center; justify-content: center;flex-wrap: wrap">
    <h2 style="flex-basis:100%">Weather data for city</h2>
        <form style="flex-basis: 100%">
        <input placeholder="Location" style="padding:8px; border: 2px solid #cccccc">
        <button style="padding:8px; border:1px solid #cccccc;cursor:pointer; background-color: #888888; color:white">Search</button>
    </form>
    <div style="height:70px; width:400px;flex-basis:100%"><h1 id="city-name"></h1></div>
    <div style="height: 60px;" id="date"></div>
    <div style="width:200px;height:200px;flex-basis:100%"><p id="temp" style="font-size:3em; font-weight:100; flex-basis:100%"></p></div>

    <div style="border-right:1px solid rgb(153, 196, 252); width:200px;height:200px;"><p id="temp2" style="font-size:1.2em; font-weight:100; flex-basis:100%"></p></div>
    <div style="border-right:1px solid rgb(153, 196, 252);width:200px;height:200px;"><p id="temp3" style="font-size:1.2em; font-weight:100; flex-basis:100%"></p></div>
    <div style="width:200px;height:200px;"><p id="temp4" style="font-size:1.2em; font-weight:100; flex-basis:100%"></p></div>

    <div style="margin-top: 15px;flex-basis:100%; padding:8px;width: 300px;color:white; border-radius: 8px; background-color:#FFB630;box-shadow: 0 1px 6px rgb(0,0,0,0.12), 0 1px 4px rgba(0,0,0,0.24)"><p id="message-1" style="color: purple"></p></div>
    <p  style="flex-basis: 100%" id="message-2"></p>
    </div>

    <script>
        console.log("Hello");
        const formElement = document.querySelector('form');
        const inputElement = document.querySelector('input');
        const messageOne = document.querySelector('#message-1');
        const messageTwo = document.querySelector('#message-2');
        const cityName = document.querySelector('#city-name');
        const temperature = document.querySelector('#temp');
        const temperature2 = document.querySelector('#temp2');
        const temperature3 = document.querySelector('#temp3');
        const temperature4 = document.querySelector('#temp4');
        const dateNow =  document.querySelector('#date');

        formElement.addEventListener('submit', (e) => {
            e.preventDefault();
            const location = inputElement.value;
            console.log(location)
            messageOne.textContent = 'Loading Results';
            messageTwo.textContent = '';
            fetch('/weather/?address=' + location).then((response) =>{
            response.json().then((data) => {
                console.log(data);
                if(data.error)
                {
                    messageTwo.textContent = data.error;
                }
                else
                {
                    messageOne.innerHTML = "Temperature is " + data.temperature + "°C<br> Precipitation is " + data.precipitation + "% chance<br> Summary: " + data.summary + "<br> Location: " + data.area;
                    cityName.textContent = data.area;
                    temperature.textContent = data.temperature + "°";
                    var d = new Date();
                    var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

                    temperature2.innerHTML = days[d.getDay() + 1] + "<br>" + data.oneDayAfterTempHigh + "°    |    " + data.oneDayAfterTempLow + "°";
                    temperature3.innerHTML = days[d.getDay() + 2] + "<br>" + data.twoDayAfterTempHigh + "°    |    " + data.twoDayAfterTempLow + "°";
                    temperature4.innerHTML = days[d.getDay() + 3] + "<br>" + data.threeDayAfterTempHigh + "°    |    " + data.threeDayAfterTempLow + "°";
                    var d = new Date();
                    var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                    dateNow.textContent = days[d.getDay()] + ", " + months[d.getMonth()] + " " + d.getDate() + ", 20" + d.getYear().toString().slice(1);
                }
            });
        });

        });
    </script>
</body>

</html>